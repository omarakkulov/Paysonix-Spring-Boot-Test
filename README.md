# Paysonix-Spring-Boot-Test

## Подробнее про решение:

1. В приложении для вычисления mac от строки я использовал зависимость от Google Guava, 
   так как она очень удобным способом делится методами для этого.

2. Для предобработки контроллера я воспользовался фильтрами из Apache Tomcat для того, 
   чтобы пробрасывать исключения на уровне фильтров, а не контроллеров

3. Сам метод контроллера принимает на вход operationId, который, по правде говоря, даже и не используется в приложении. 
   Возможно это просто был некоторый небольшой пункт для реализации. Параметры из тела запроса поступают в TreeMap, 
   которая сортирует данные по ключу, на мой взгляд эта структура данных идеально подходит для решения данного кейса.
   Далее берем строку от этих параметров и вычисляем hmac
   
4. Для сравнения значений токена из заголовков запроса с нашим значением, ранее использовался .properties файл. 
   Теперь же данные берутся из переменных окружения. Соответственно, в переменные окружения нужно вписать:
   ###### TOKEN=some_token;HMAC_KEY=some_hmac_key;
   ,где some_token - значение токена (но клют от него будет x-token в самом запросе), 
   some_hmac_key - значение ключа для алгоритма.

5. Также были написаны тесты для сервисного слоя приложения в соответствующей для этого директории.

6. Метод правильно отрабатывается, когда приходит объект такого типа:
   
   ![](https://sun9-57.userapi.com/impg/1FXVohbJsr2If980n6QNf4pLNhYzkrvg2pf3cQ/NhtItzWvffU.jpg?size=257x187&quality=96&sign=27e24f2b6949b4410de8c5b7740ef38a&type=album)

   Релизации на что-то по типу объекта снизу не было, т.к. для этого надо согласовать все с фронтом.
   ![](https://sun9-56.userapi.com/impg/MDpzZvOajH6Zsf0n1-AL5eynm3KhenBguKfROQ/vdwIYqNhjNE.jpg?size=297x277&quality=96&sign=1939ec9ce731a7b37b033dd322f2a200&type=album)


6. Приложение находится на порте 8081, измените при надобности в application.properties:
      ###### server.port=${Свое значение}

### Спасибо за внимание!
